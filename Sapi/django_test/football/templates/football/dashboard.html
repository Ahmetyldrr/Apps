<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futbol Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .section h2 { color: #333; border-bottom: 2px solid #0066cc; padding-bottom: 10px; }
        .matches-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .match-card { background: #f9f9f9; padding: 15px; border-radius: 5px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .stat-card { background: #e8f4f8; padding: 15px; border-radius: 5px; text-align: center; }
        .league-table { width: 100%; border-collapse: collapse; }
        .league-table th, .league-table td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        .league-table th { background-color: #f0f0f0; }
    </style>
</head>
<body>
    <h1>Futbol Dashboard - Ã‡oklu Tablo Verileri</h1>
    
    <!-- BÃ–LÃœM 1: BÄ°TEN MAÃ‡LAR -->
    <div class="section">
        <h2>ğŸ Biten MaÃ§lar ({{ finished_matches.count }} maÃ§)</h2>
        <div class="matches-grid">
            {% for match in finished_matches %}
            <div class="match-card">
                <h3>{{ match.home_team.name }} vs {{ match.away_team.name }}</h3>
                <p><strong>Tarih:</strong> {{ match.date|date:"d M Y" }}</p>
                <p><strong>Skor:</strong> {{ match.home_score }} - {{ match.away_score }}</p>
                <p><strong>Lig:</strong> {{ match.league.name }}</p>
                {% if match.matchanalysis_set.first %}
                    <p><strong>Analiz:</strong> {{ match.matchanalysis_set.first.key_events|truncatewords:10 }}</p>
                {% endif %}
            </div>
            {% empty %}
            <p>HenÃ¼z biten maÃ§ bulunmuyor.</p>
            {% endfor %}
        </div>
    </div>

    <!-- BÃ–LÃœM 2: GELECEK MAÃ‡LAR -->
    <div class="section">
        <h2>â­ï¸ Gelecek MaÃ§lar ({{ upcoming_matches.count }} maÃ§)</h2>
        <div class="matches-grid">
            {% for match in upcoming_matches %}
            <div class="match-card">
                <h3>{{ match.home_team.name }} vs {{ match.away_team.name }}</h3>
                <p><strong>Tarih:</strong> {{ match.date|date:"d M Y H:i" }}</p>
                <p><strong>Lig:</strong> {{ match.league.name }}</p>
                <p><strong>Stadyum:</strong> {{ match.venue|default:"BelirtilmemiÅŸ" }}</p>
            </div>
            {% empty %}
            <p>YaklaÅŸan maÃ§ bulunmuyor.</p>
            {% endfor %}
        </div>
    </div>

    <!-- BÃ–LÃœM 3: TAKIM Ä°STATÄ°STÄ°KLERÄ° -->
    <div class="section">
        <h2>ğŸ“Š TakÄ±m Ä°statistikleri</h2>
        <div class="stats-grid">
            {% for stat in team_stats %}
            <div class="stat-card">
                <h4>{{ stat.team.name }}</h4>
                <p><strong>Oynanan:</strong> {{ stat.matches_played }}</p>
                <p><strong>Galibiyet:</strong> {{ stat.wins }}</p>
                <p><strong>Beraberlik:</strong> {{ stat.draws }}</p>
                <p><strong>MaÄŸlubiyet:</strong> {{ stat.losses }}</p>
                <p><strong>Gol AtÄ±lan:</strong> {{ stat.goals_for }}</p>
                <p><strong>Gol Yenilen:</strong> {{ stat.goals_against }}</p>
                <p><strong>Averaj:</strong> {{ stat.goal_difference|floatformat:0 }}</p>
            </div>
            {% empty %}
            <p>Ä°statistik bulunmuyor.</p>
            {% endfor %}
        </div>
    </div>

    <!-- BÃ–LÃœM 4: LÄ°G TABLOSU -->
    <div class="section">
        <h2>ğŸ† Lig TablolarÄ±</h2>
        {% for table in league_tables %}
        <h3>{{ table.league.name }} - {{ table.season }} Sezonu</h3>
        <table class="league-table">
            <thead>
                <tr>
                    <th>SÄ±ra</th>
                    <th>TakÄ±m</th>
                    <th>Puan</th>
                    <th>Oynanan</th>
                    <th>Averaj</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ table.position }}</td>
                    <td>{{ table.team.name }}</td>
                    <td>{{ table.points }}</td>
                    <td>{{ table.matches_played }}</td>
                    <td>{{ table.goal_difference|floatformat:0 }}</td>
                </tr>
            </tbody>
        </table>
        {% empty %}
        <p>Lig tablosu bulunmuyor.</p>
        {% endfor %}
    </div>

    <!-- BÃ–LÃœM 5: HAFTALAR ARASI ANALÄ°Z -->
    <div class="section">
        <h2>ğŸ“ˆ HaftalÄ±k Ä°statistikler</h2>
        <div class="stats-grid">
            {% for weekly in weekly_stats %}
            <div class="stat-card">
                <h4>{{ weekly.league.name }} - Hafta {{ weekly.week_number }}</h4>
                <p><strong>Toplam MaÃ§:</strong> {{ weekly.total_matches }}</p>
                <p><strong>Toplam Gol:</strong> {{ weekly.total_goals }}</p>
                <p><strong>MaÃ§ BaÅŸÄ±na Gol:</strong> {{ weekly.average_goals|floatformat:1 }}</p>
                <p><strong>Tarih:</strong> {{ weekly.week_start|date:"d M" }} - {{ weekly.week_end|date:"d M Y" }}</p>
            </div>
            {% empty %}
            <p>HaftalÄ±k istatistik bulunmuyor.</p>
            {% endfor %}
        </div>
    </div>

    <!-- BÃ–LÃœM 6: OYUNCU BÄ°LGÄ°LERÄ° -->
    <div class="section">
        <h2>âš½ En Ä°yi Oyuncular</h2>
        <div class="stats-grid">
            {% for player in top_players %}
            <div class="stat-card">
                <h4>{{ player.name }} {{ player.surname }}</h4>
                <p><strong>TakÄ±m:</strong> {{ player.team.name }}</p>
                <p><strong>Pozisyon:</strong> {{ player.position }}</p>
                <p><strong>YaÅŸ:</strong> {{ player.age }} yaÅŸÄ±nda</p>
                <p><strong>MaaÅŸ:</strong> ${{ player.salary|floatformat:0 }}</p>
            </div>
            {% empty %}
            <p>Oyuncu bilgisi bulunmuyor.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Ã–ZET BÄ°LGÄ°LER -->
    <div class="section">
        <h2>ğŸ“‹ Genel Ã–zet</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <h4>Toplam Lig</h4>
                <p><strong>{{ total_leagues }}</strong> aktif lig</p>
            </div>
            <div class="stat-card">
                <h4>Toplam TakÄ±m</h4>
                <p><strong>{{ total_teams }}</strong> takÄ±m</p>
            </div>
            <div class="stat-card">
                <h4>Bu Ay MaÃ§lar</h4>
                <p><strong>{{ matches_this_month }}</strong> maÃ§</p>
            </div>
            <div class="stat-card">
                <h4>Aktif Oyuncular</h4>
                <p><strong>{{ active_players }}</strong> oyuncu</p>
            </div>
        </div>
    </div>

</body>
</html>
